# Описание структуры базы данных. #

## Структура ##
База имеет следующую структуру:
![http://cloudobserver.googlecode.com/svn/wiki/Assets/DatabaseStruct.jpg](http://cloudobserver.googlecode.com/svn/wiki/Assets/DatabaseStruct.jpg)

## Таблицы ##
Используются таблицы:
  * **Users** - содержит данные о зарегистрированных пользователях.
  * **Groups** - содержит данные о зарегистрированных группах.
  * **Cameras** - содержит данные о зарегистрированных камерах.
  * **Frames** - содержит данные о сохраненных кадрах.
  * **GroupMembers** - описывает принадлежности пользователей к группам.
  * **GroupCameras** - описывает принадлежности камер к группам.

## Поля таблиц ##

### Users ###
  * **UserID (int)** - идентификатор пользователя, ключевое поле.
  * **Email (varchar(32))** - электронный адрес пользователя.
  * **Password (varchar(32))** - пароль пользователя.
  * **Name (varchar(32))** - отображаемое имя пользователя.
  * **Description (varchar(2048))** - описание пользователя в виде html-страницы.
  * **IconPath (varchar(256))** - путь к файлу иконки (аватара) пользователя в серверном хранилище.
  * **RegistrationDate (datetime)** - дата и время регистрации пользователя.

### Groups ###
  * **GroupID (int)** - идентификатор группы, ключевое поле.
  * **Name (varchar(32))** - имя группы.
  * **Description (varchar(2048))** - описание группы в виде html-страницы.
  * **IconPath (varchar(256))** - путь к файлу иконки группы в серверном хранилище.
  * **Privacy (int)** - настройки доступа:
    * _0_ - открытая группа, доступна для поиска по группам и свободна для вступления, доступна для просмотра незарегистрированными пользователями
    * _1_ - внутренняя группа, доступна для поиска по группам и свободна для вступления
    * _2_ - закрытая группа, недоступна из поиска по группам, добавить участника может только пользователь группы с соответствующими правами
  * **RegistrationDate (datetime)** - дата и время регистрации группы.

### Cameras ###
  * **CameraID (int)** - идентификатор камеры, ключевое поле.
  * **Path (varchar(256))** - уникальный путь к камере (используется для добавления вещающей камеры в группу).
  * **Name (varchar(32))** - имя камеры.
  * **Description (varchar(2048))** - описание камеры в виде html-страницы.
  * **IconPath (varchar(256))** - путь к файлу иконки камеры в серверном хранилище (используется когда онлайн трансляция с камеры недоступна).
  * **RegistrationDate (datetime)** - дата и время регистрации камеры.

### Frames ###
  * **FrameID (int)** - идентификатор кадра, ключевое поле.
  * **CameraID (int)** - идентификатор камеры, с которой был получен кадр.
  * **ContentPath (varchar(256))** - путь к файлу кадра в серверном хранилище.
  * **Marker (varchar(2048))** - маркер кадра с информацией о времени съемки и обнаруженных событиях.

### GroupMembers ###
  * **ID (int)** - ключевое поле.
  * **UserID (int)** - идентификатор пользователя.
  * **GroupID (int)** - идентификатор группы.
  * **Privileges (int)** - права пользователя в группе (поле рассматривается по битам).

### GroupCameras ###
  * **ID (int)** - ключевое поле.
  * **CameraID (int)** - идентификатор камеры.
  * **GroupID (int)** - идентификатор группы.